{
    "$schema": "https://turbo.build/schema.json",
    "pipeline": {
        "build": {
            "dependsOn": ["codegen:sepolia", "^build"],
            "inputs": [
                "tsconfig.json",
                "{apps,packages}/**/src/**/*.{circom,mdx,sol,ts,tsx,yaml,yml}",
                "!packages/cli-template-*/**",
                "!{apps,packages}/**/src/**/*.test.{ts}",
                "!{apps,packages}/**/src/**/test/**/*",
                "!{apps,packages}/**/{build,dist,generated}/**/tests/**/*"
            ],
            "outputs": ["{apps,packages}/**/{build,dist,generated}/*.{cjs,js,r1cs,sym,ts,wasm}"]
        },
        "codegen:sepolia": {
            "inputs": [
                "apps/subgraph/scripts/generate-subgraph.ts",
                "apps/subgraph/src/semaphore.ts",
                "apps/subgraph/{schema.graphql,subgraph.yaml,subgraph.template.yaml}"
            ],
            "outputs": ["apps/subgraph/generated/**/*"]
        },
        "//#_format:prettier": {
            "inputs": [
                "*.{js,json,md,ts,yml}",
                "{apps,packages}/**/*.{json,md,mdx,sol,ts,ts,tsx,yaml,yml}",
                "!{apps,packages}/**/{build,dist,generated}/**/*"
            ]
        },
        "//#_format:prettier:write": {
            "inputs": [
                "*.{js,json,md,ts,yml}",
                "{apps,packages}/**/*.{js,json,md,mdx,sol,ts,ts,tsx,yaml,yml}",
                "!{apps,packages}/**/{build,dist,generated}/**/*"
            ]
        },
        "format:remark": {
            "inputs": ["apps/docs/**/*.mdx"]
        },
        "format:remark:write": {
            "inputs": ["apps/docs/**/*.mdx"]
        },
        "//#_lint:eslint": {
            "dependsOn": ["@semaphore-protocol/proof#build"],
            "inputs": [
                "{apps,packages}/**/*.{js,ts,tsx}",
                "!{apps,packages}/**/{build,dist,generated}/**/*",
                "packages/cli-template-*/**"
            ]
        },
        "lint:solhint": {
            "dependsOn": ["^build"],
            "inputs": ["packages/contracts/*.sol"]
        },
        "test": {
            "dependsOn": ["^build", "build"],
            "inputs": [
                "apps/subgraph/**/*.{json,ts}",
                "!apps/subgraph/{build,generated}/**/*",
                "packages/circuits/src/**/*.circom",
                "packages/circuits/tests/*.ts"
            ]
        },
        "test:coverage": {
            "dependsOn": ["^build", "build"],
            "inputs": ["packages/contracts/src/**/*.sol", "packages/contracts/test/**/*.ts"]
        },
        "//#_test:libraries": {
            "dependsOn": [
                "@semaphore-protocol/data#build",
                "@semaphore-protocol/group#build",
                "@semaphore-protocol/identity#build",
                "@semaphore-protocol/proof#build",
                "@semaphore-protocol/utils#build"
            ],
            "inputs": ["packages/{data,group,identity,proof,utils}/{src,tests}/*.{cjs,js,ts}"]
        }
    }
}
